<graph id="Graph">
  <version>1.0</version>
  <node id="Read">
    <operator>Read</operator>
    <sources/>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <useAdvancedOptions>false</useAdvancedOptions>
      <file>$Input</file>
      <copyMetadata>true</copyMetadata>
      <bandNames>B1,B2,B3,B4,B5,B6,B7,B8,B8A,B9,B10,B11,B12</bandNames>
      <pixelRegion>0,0,198,173</pixelRegion>
      <maskNames/>
    </parameters>
  </node>
  <node id="BandMerge">
    <operator>BandMerge</operator>
    <sources>
      <sourceProduct refid="BandMaths"/>
      <sourceProduct.1 refid="Read(2)"/>
    </sources>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <sourceBands/>
      <geographicError>1.0E-5</geographicError>
    </parameters>
  </node>
  <node id="BandMaths">
    <operator>BandMaths</operator>
    <sources>
      <sourceProduct refid="Read"/>
    </sources>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <targetBands>
        <targetBand>
          <name>NDCIv</name>
          <type>float32</type>
          <expression>IF (not (IDEPIX_INVALID == 255 or IDEPIX_CLOUD == 255 or IDEPIX_CLOUD_AMBIGUOUS == 255 or IDEPIX_CLOUD_SURE == 255 or IDEPIX_CLOUD_BUFFER == 255 or IDEPIX_CLOUD_SHADOW == 255 or IDEPIX_CIRRUS_SURE == 255 or IDEPIX_CIRRUS_AMBIGUOUS == 255 or IDEPIX_LAND == 255 or  IDEPIX_VEG_RISK == 255)) THEN 826.57 * ((B5-B4)/(B5+B4)) * ((B5-B4)/(B5+B4))* ((B5-B4)/(B5+B4))- 176.43 * ((B5-B4)/(B5+B4))*((B5-B4)/(B5+B4))+ 19 * ((B5-B4)/(B5+B4)) + 4.071 ELSE NaN</expression>
          <description/>
          <unit/>
          <noDataValue>NaN</noDataValue>
        </targetBand>
      </targetBands>
      <variables/>
    </parameters>
  </node>
 <node id="Read(2)">
    <operator>Read</operator>
    <sources/>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <useAdvancedOptions>false</useAdvancedOptions>
      <file>$Input</file>
      <copyMetadata>true</copyMetadata>
      <bandNames/>
      <pixelRegion>0,0,198,173</pixelRegion>
      <maskNames/>
    </parameters>
  </node>
 <!--<node id="Read(3)">
    <operator>Read</operator>
    <sources/>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <useAdvancedOptions>false</useAdvancedOptions>
      <file>$Input</file>
      <copyMetadata>true</copyMetadata>
      <bandNames/>
      <pixelRegion>0,0,198,173</pixelRegion>
      <maskNames/>
    </parameters>
  </node>
  <node id="Read(4)">
    <operator>Read</operator>
    <sources/>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <useAdvancedOptions>false</useAdvancedOptions>
      <file>$Input</file>
      <copyMetadata>true</copyMetadata>
      <bandNames/>
      <pixelRegion>0,0,198,173</pixelRegion>
      <maskNames/>
    </parameters>
  </node>
  <node id="Read(5)">
    <operator>Read</operator>
    <sources/>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <useAdvancedOptions>false</useAdvancedOptions>
      <file>$Input</file>
      <copyMetadata>true</copyMetadata>
      <bandNames/>
      <pixelRegion>0,0,198,173</pixelRegion>
      <maskNames/>
    </parameters>
  </node>
  <node id="Read(6)">
    <operator>Read</operator>
    <sources/>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <useAdvancedOptions>false</useAdvancedOptions>
      <file>$Input</file>
      <copyMetadata>true</copyMetadata>
      <bandNames/>
      <pixelRegion>0,0,198,173</pixelRegion>
      <maskNames/>
    </parameters>
  </node>
  <node id="Read(7)">
    <operator>Read</operator>
    <sources/>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <useAdvancedOptions>false</useAdvancedOptions>
      <file>$Input</file>
      <copyMetadata>true</copyMetadata>
      <bandNames/>
      <pixelRegion>0,0,198,173</pixelRegion>
      <maskNames/>
    </parameters>
  </node> -->
  <!-- <node id="BandMaths(2)">
    <operator>BandMaths</operator>
    <sources>
      <sourceProduct refid="Read(3)"/>
    </sources>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <targetBands>
        <targetBand>
          <name>MCI</name>
          <type>float32</type>
          <expression>rrs_B5 - rrs_B4 - (rrs_B6 -rrs_B4)*((709-665)/(754-665))</expression>
          <description/>
          <unit/>
          <noDataValue>NaN</noDataValue>
        </targetBand>
      </targetBands>
      <variables/>
    </parameters>
  </node>
  <node id="BandMaths(3)">
    <operator>BandMaths</operator>
    <sources>
      <sourceProduct refid="Read(4)"/>
    </sources>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <targetBands>
        <targetBand>
          <name>empirical_2_bands_equation1</name>
          <type>float32</type>
          <expression>136.3 * (rrs_B6/rrs_B4) - 16.2</expression>
          <description/>
          <unit/>
          <noDataValue>NaN</noDataValue>
        </targetBand>
      </targetBands>
      <variables/>
    </parameters>
  </node>
  <node id="BandMaths(4)">
    <operator>BandMaths</operator>
    <sources>
      <sourceProduct refid="Read(5)"/>
    </sources>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <targetBands>
        <targetBand>
          <name>empirical_2_bands_equation2</name>
          <type>float32</type>
          <expression>25.28*((rrs_B5/rrs_B4)*(rrs_B5/rrs_B4)) + 14.85 * (rrs_B5/rrs_B4) - 15.18</expression>
          <description/>
          <unit/>
          <noDataValue>NaN</noDataValue>
        </targetBand>
      </targetBands>
      <variables/>
    </parameters>
  </node>
  <node id="BandMaths(5)">
    <operator>BandMaths</operator>
    <sources>
      <sourceProduct refid="Read(6)"/>
    </sources>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <targetBands>
        <targetBand>
          <name>empirical_3_bands_equation1</name>
          <type>float32</type>
          <expression>117.42 * ((1/rrs_B4 - 1/rrs_B5))*rrs_B6 + 23.174</expression>
          <description/>
          <unit/>
          <noDataValue>NaN</noDataValue>
        </targetBand>
      </targetBands>
      <variables/>
    </parameters>
  </node>
  <node id="BandMaths(6)">
    <operator>BandMaths</operator>
    <sources>
      <sourceProduct refid="Read(7)"/>
    </sources>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <targetBands>
        <targetBand>
          <name>empirical_3_bands_equation3</name>
          <type>float32</type>
          <expression>315.5 * (((1/rrs_B4 - 1/rrs_B5))*rrs_B6)*(((1/rrs_B4 - 1/rrs_B5))*rrs_B6)+ 215.95 * ((1/rrs_B4 - 1/rrs_B5))*rrs_B6 + 25.66</expression>
          <description/>
          <unit/>
          <noDataValue>NaN</noDataValue>
        </targetBand>
      </targetBands>
      <variables/>
    </parameters>
  </node> -->
  <node id="Write">
    <operator>Write</operator>
    <sources>
      <sourceProduct refid="BandMerge"/>
    </sources>
    <parameters class="com.bc.ceres.binding.dom.XppDomElement">
      <file>$Output</file>
      <formatName>BEAM-DIMAP</formatName>
    </parameters>
  </node>
  <applicationData id="Presentation">
    <Description/>
    <node id="Read">
            <displayPosition x="31.0" y="86.0"/>
    </node>
    <node id="BandMerge">
      <displayPosition x="239.0" y="83.0"/>
    </node>
    <node id="BandMaths">
      <displayPosition x="121.0" y="85.0"/>
    </node>
    <node id="Read(2)">
      <displayPosition x="247.0" y="16.0"/>
    </node>
    <node id="Read(3)">
      <displayPosition x="31.0" y="136.0"/>
    </node>
    <node id="Read(4)">
      <displayPosition x="30.0" y="184.0"/>
    </node>
    <node id="Read(5)">
      <displayPosition x="29.0" y="226.0"/>
    </node>
    <node id="Read(6)">
      <displayPosition x="31.0" y="266.0"/>
    </node>
    <node id="Read(7)">
      <displayPosition x="31.0" y="306.0"/>
    </node>
    <node id="BandMaths(2)">
      <displayPosition x="110.0" y="135.0"/>
    </node>
    <node id="BandMaths(3)">
      <displayPosition x="113.0" y="181.0"/>
    </node>
    <node id="BandMaths(4)">
      <displayPosition x="114.0" y="227.0"/>
    </node>
    <node id="BandMaths(5)">
      <displayPosition x="115.0" y="267.0"/>
    </node>
    <node id="BandMaths(6)">
      <displayPosition x="119.0" y="309.0"/>
    </node>
    <node id="Write">
            <displayPosition x="528.0" y="132.0"/>
    </node>
  </applicationData>
</graph>